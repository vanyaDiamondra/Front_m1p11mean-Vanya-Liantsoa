{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\nfunction LoginComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"i\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.feedBack.message, \" \");\n  }\n}\nconst _c0 = () => [\"/inscription\"];\nexport class LoginComponent {\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n    this.user = {\n      email: 'liliandrianaivomamonjisoa@gmail.com',\n      mdp: 'lili'\n    };\n    this.feedBack = {\n      status: '',\n      message: '',\n      token: '',\n      profilId: 0\n    };\n  }\n  ngOnInit() {}\n  doLogin() {\n    this.userService.login(this.user).subscribe(response => {\n      this.feedBack = response;\n      if (this.feedBack.status === \"200\") {\n        window.localStorage.setItem('tokenuser', this.feedBack.token);\n        if (this.feedBack.profilId === 1) {\n          this.router.navigate(['/accueil']);\n        } else if (this.feedBack.profilId === 2) {\n          this.router.navigate(['/employe']);\n        } else if (this.feedBack.profilId === 3) {\n          this.router.navigate(['/manager']);\n        }\n      }\n    }, error => {\n      console.error('Error:', error.error);\n      this.feedBack.message = error.error.message;\n      this.router.navigate(['/']);\n    });\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 26,\n    vars: 6,\n    consts: [[1, \"\"], [1, \"container\"], [1, \"row\"], [1, \"col-xl-12\"], [1, \"feedback\"], [4, \"ngIf\", \"ngIfElse\"], [\"error\", \"\"], [1, \"form-group\", \"col-md-12\"], [1, \"fa-sharp\", \"fa-regular\", \"fa-envelope\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"placeholder\", \"Email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fa-sharp\", \"fa-regular\", \"fa-eye\"], [\"type\", \"password\", \"name\", \"mdp\", \"placeholder\", \"Mot de passe\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"routerLink\"], [1, \"form-btn\", \"col-12\"], [1, \"th-btn\", \"fw-btn\", 3, \"click\"], [1, \"fa-solid\", \"fa-arrow-right\", \"ms-2\"], [2, \"color\", \"tomato\"], [1, \"fa-sharp\", \"fa-regular\", \"fa-warning\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h4\");\n        i0.ɵɵtext(5, \"Bienvenue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\");\n        i0.ɵɵtext(7, \"Veuillez-vous connecter pour b\\u00E9n\\u00E9ficier de nos services en ligne\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 1, 0, \"div\", 5)(10, LoginComponent_ng_template_10_Template, 3, 1, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 7);\n        i0.ɵɵelement(13, \"i\", 8);\n        i0.ɵɵelementStart(14, \"input\", 9);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_14_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.email, $event) || (ctx.user.email = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 7);\n        i0.ɵɵelement(16, \"i\", 10);\n        i0.ɵɵelementStart(17, \"input\", 11);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_17_listener($event) {\n          i0.ɵɵtwoWayBindingSet(ctx.user.mdp, $event) || (ctx.user.mdp = $event);\n          return $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"p\");\n        i0.ɵɵtext(19, \"Pas encore de compte? \");\n        i0.ɵɵelementStart(20, \"a\", 12);\n        i0.ɵɵtext(21, \" S'inscrire ici\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 13)(23, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_23_listener() {\n          return ctx.doLogin();\n        });\n        i0.ɵɵtext(24, \"Se connecter\");\n        i0.ɵɵelement(25, \"i\", 15);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(11);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.feedBack.message === \"\")(\"ngIfElse\", _r2);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.email);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.mdp);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0));\n      }\n    },\n    dependencies: [i3.NgIf, i2.RouterLink, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["i0","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","feedBack","message","LoginComponent","constructor","userService","router","user","email","mdp","status","token","profilId","ngOnInit","doLogin","login","subscribe","response","window","localStorage","setItem","navigate","error","console","_","ɵɵdirectiveInject","i1","UserService","i2","Router","_2","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵtemplate","LoginComponent_div_9_Template","LoginComponent_ng_template_10_Template","ɵɵtemplateRefExtractor","ɵɵtwoWayListener","LoginComponent_Template_input_ngModelChange_14_listener","$event","ɵɵtwoWayBindingSet","LoginComponent_Template_input_ngModelChange_17_listener","ɵɵlistener","LoginComponent_Template_button_click_23_listener","ɵɵproperty","_r2","ɵɵtwoWayProperty","ɵɵpureFunction0","_c0"],"sources":["D:\\documents\\M1\\Web Avancée\\mean_beautysalon\\Front_m1p11mean-Vanya-Liantsoa\\src\\app\\components\\login\\login.component.ts","D:\\documents\\M1\\Web Avancée\\mean_beautysalon\\Front_m1p11mean-Vanya-Liantsoa\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n})\r\n\r\nexport class LoginComponent implements OnInit {\r\n\r\n  user = { email: 'liliandrianaivomamonjisoa@gmail.com', mdp: 'lili'};\r\n  feedBack = { status: '', message: '', token: '', profilId: 0};\r\n\r\n  constructor(private userService: UserService, private router: Router) {   }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  doLogin(): any {\r\n    this.userService.login(this.user).subscribe(\r\n      response => {\r\n          this.feedBack = response;\r\n          if( this.feedBack.status === \"200\" ){\r\n            window.localStorage.setItem('tokenuser', this.feedBack.token);\r\n\r\n            if( this.feedBack.profilId === 1 ){\r\n              this.router.navigate(['/accueil']);\r\n            } else if( this.feedBack.profilId === 2){\r\n              this.router.navigate(['/employe']);\r\n            } else if( this.feedBack.profilId === 3 ){\r\n              this.router.navigate(['/manager']);\r\n            }\r\n          \r\n          }\r\n      },\r\n      error => {\r\n        console.error('Error:', error.error);\r\n        this.feedBack.message=error.error.message;\r\n        this.router.navigate(['/']);\r\n\r\n      }\r\n    );\r\n\r\n  }\r\n}\r\n\r\n","\r\n<div class=\"\">\r\n  <div class=\"container\">\r\n      <div class=\"row\">\r\n          <div class=\"col-xl-12\">\r\n              <h4>Bienvenue</h4>\r\n              <p>Veuillez-vous connecter pour bénéficier de nos services en ligne</p>\r\n\r\n            <div class=\"feedback\">\r\n                <div *ngIf=\"feedBack.message === ''; else error\">\r\n                </div>\r\n                <ng-template #error>\r\n                  <p style=\"color: tomato;\">{{ feedBack.message }} <i class=\"fa-sharp fa-regular fa-warning\"></i> </p>\r\n                </ng-template>\r\n            </div>\r\n\r\n              <div class=\"form-group col-md-12\">\r\n                <i class=\"fa-sharp fa-regular fa-envelope\"></i> \r\n                <input type=\"email\" class=\"form-control\"[(ngModel)]=\"user.email\" name=\"email\" id=\"email\" placeholder=\"Email\">\r\n              </div>\r\n\r\n              <div class=\"form-group col-md-12\">\r\n                <i class=\"fa-sharp fa-regular fa-eye\"></i> \r\n                <input type=\"password\" class=\"form-control\" [(ngModel)]=\"user.mdp\" name=\"mdp\" placeholder=\"Mot de passe\">\r\n              </div>\r\n\r\n              <p>Pas encore de compte? <a [routerLink]=\"['/inscription']\"> S'inscrire ici</a></p>\r\n\r\n              <div class=\"form-btn col-12\">\r\n                <button class=\"th-btn fw-btn\" (click) = \"doLogin()\">Se connecter<i class=\"fa-solid fa-arrow-right ms-2\"></i>\r\n                </button>\r\n              </div>\r\n          </div>\r\n        </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}