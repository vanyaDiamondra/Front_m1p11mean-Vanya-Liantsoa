{"ast":null,"code":"import _asyncToGenerator from \"D:/documents/M1/Web Avanc\\xE9e/mean_beautysalon/Front_m1p11mean-Vanya-Liantsoa/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/storage\";\nexport class UpdateComponent {\n  constructor(fireStorage) {\n    this.fireStorage = fireStorage;\n    this.title = 'imageupload';\n  }\n  onDragOver(event) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  onDragEnter(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const target = event.target;\n    // Add visual indication when item is dragged over the drop target\n    target.classList.add('drag-over');\n  }\n  onDragLeave(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const target = event.target;\n    // Remove visual indication when item leaves the drop target\n    target.classList.remove('drag-over');\n  }\n  onDrop(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const target = event.target;\n    // Remove visual indication when item is dropped\n    target.classList.remove('drag-over');\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.uploadFiles(files);\n    }\n    // const files = event.dataTransfer?.files;\n    // if (files && files.length > 0) {\n    //   this.saveFiles(files);\n    // }\n  }\n  saveFiles(files) {\n    // Perform operations to save the dropped files\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      console.log('Dropped file:', file.name);\n      // Here, you can upload the file to a server or process it as needed\n    }\n  }\n  onDragStart(event) {\n    // Add any necessary data to the drag event\n    const target = event.target; // Ensure the target is an <img> element\n    const imageUrl = target.src; // Get the source URL of the image\n    if (event.dataTransfer && imageUrl) {\n      event.dataTransfer.setData('text/uri-list', imageUrl);\n    }\n  }\n  onDragEnd(event) {\n    // Perform any cleanup tasks after dragging ends\n  }\n  uploadFiles(files) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        const filePath = `uploads/${file.name}`;\n        const fileRef = _this.fireStorage.ref(filePath);\n        const task = _this.fireStorage.upload(filePath, file);\n        // Wait for the upload task to complete\n        yield task;\n        console.log('File uploaded successfully:', filePath);\n      }\n    })();\n  }\n  onFileChange(event) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const file = event.target.files[0];\n      if (file) {\n        const path = `${file.name}`;\n        const uploadTask = yield _this2.fireStorage.upload(path, file);\n        const url = yield uploadTask.ref.getDownloadURL();\n        console.log(url);\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function UpdateComponent_Factory(t) {\n    return new (t || UpdateComponent)(i0.ɵɵdirectiveInject(i1.AngularFireStorage));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UpdateComponent,\n    selectors: [[\"app-updatepic\"]],\n    decls: 6,\n    vars: 0,\n    consts: [[\"type\", \"file\", 3, \"change\"], [\"id\", \"drag-container\"], [\"draggable\", \"true\", 1, \"drag-item\", 3, \"dragstart\", \"dragend\"], [1, \"drop-target\", 3, \"dragover\", \"dragenter\", \"dragleave\", \"drop\"]],\n    template: function UpdateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"input\", 0);\n        i0.ɵɵlistener(\"change\", function UpdateComponent_Template_input_change_0_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵlistener(\"dragstart\", function UpdateComponent_Template_div_dragstart_2_listener($event) {\n          return ctx.onDragStart($event);\n        })(\"dragend\", function UpdateComponent_Template_div_dragend_2_listener($event) {\n          return ctx.onDragEnd($event);\n        });\n        i0.ɵɵtext(3, \" Drag me! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵlistener(\"dragover\", function UpdateComponent_Template_div_dragover_4_listener($event) {\n          return ctx.onDragOver($event);\n        })(\"dragenter\", function UpdateComponent_Template_div_dragenter_4_listener($event) {\n          return ctx.onDragEnter($event);\n        })(\"dragleave\", function UpdateComponent_Template_div_dragleave_4_listener($event) {\n          return ctx.onDragLeave($event);\n        })(\"drop\", function UpdateComponent_Template_div_drop_4_listener($event) {\n          return ctx.onDrop($event);\n        });\n        i0.ɵɵtext(5, \" Drop here! \");\n        i0.ɵɵelementEnd()();\n      }\n    },\n    styles: [\"#drag-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.drag-item[_ngcontent-%COMP%] {\\n  cursor: move;\\n}\\n\\n.drop-target[_ngcontent-%COMP%] {\\n  width: 100px;\\n  height: 100px;\\n  border: 2px dashed #ccc;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.drag-over[_ngcontent-%COMP%] {\\n  background-color: lightblue;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy91cGRhdGVwaWMvdXBkYXRlcGljLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsMkJBQTJCO0FBQzdCIiwic291cmNlc0NvbnRlbnQiOlsiI2RyYWctY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uZHJhZy1pdGVtIHtcclxuICBjdXJzb3I6IG1vdmU7XHJcbn1cclxuXHJcbi5kcm9wLXRhcmdldCB7XHJcbiAgd2lkdGg6IDEwMHB4O1xyXG4gIGhlaWdodDogMTAwcHg7XHJcbiAgYm9yZGVyOiAycHggZGFzaGVkICNjY2M7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uZHJhZy1vdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["UpdateComponent","constructor","fireStorage","title","onDragOver","event","preventDefault","stopPropagation","onDragEnter","target","classList","add","onDragLeave","remove","onDrop","files","dataTransfer","length","uploadFiles","saveFiles","i","file","console","log","name","onDragStart","imageUrl","src","setData","onDragEnd","_this","_asyncToGenerator","filePath","fileRef","ref","task","upload","onFileChange","_this2","path","uploadTask","url","getDownloadURL","_","i0","ɵɵdirectiveInject","i1","AngularFireStorage","_2","selectors","decls","vars","consts","template","UpdateComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","UpdateComponent_Template_input_change_0_listener","$event","ɵɵelementEnd","UpdateComponent_Template_div_dragstart_2_listener","UpdateComponent_Template_div_dragend_2_listener","ɵɵtext","UpdateComponent_Template_div_dragover_4_listener","UpdateComponent_Template_div_dragenter_4_listener","UpdateComponent_Template_div_dragleave_4_listener","UpdateComponent_Template_div_drop_4_listener"],"sources":["D:\\documents\\M1\\Web Avancée\\mean_beautysalon\\Front_m1p11mean-Vanya-Liantsoa\\src\\app\\components\\updatepic\\updatepic.component.ts","D:\\documents\\M1\\Web Avancée\\mean_beautysalon\\Front_m1p11mean-Vanya-Liantsoa\\src\\app\\components\\updatepic\\updatepic.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\n\r\nimport { AngularFireStorage } from \"@angular/fire/compat/storage\"\r\n\r\n@Component({\r\n  selector: 'app-updatepic',\r\n  templateUrl: './updatepic.component.html',\r\n  styleUrls: ['./updatepic.component.css']\r\n})\r\nexport class UpdateComponent {\r\n  title = 'imageupload';\r\n\r\n  constructor(private fireStorage:AngularFireStorage){}\r\n\r\n\r\n  onDragOver(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  }\r\n\r\n  onDragEnter(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const target = event.target as HTMLElement;\r\n    // Add visual indication when item is dragged over the drop target\r\n    target.classList.add('drag-over');\r\n  }\r\n\r\n  onDragLeave(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const target = event.target as HTMLElement;\r\n    // Remove visual indication when item leaves the drop target\r\n    target.classList.remove('drag-over');\r\n  }\r\n\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const target = event.target as HTMLElement;\r\n    // Remove visual indication when item is dropped\r\n    target.classList.remove('drag-over');\r\n\r\n    const files = event.dataTransfer?.files;\r\n    if (files && files.length > 0) {\r\n       this.uploadFiles(files);\r\n    }\r\n\r\n    // const files = event.dataTransfer?.files;\r\n    // if (files && files.length > 0) {\r\n    //   this.saveFiles(files);\r\n    // }\r\n  }\r\n\r\n  saveFiles(files: FileList) {\r\n    // Perform operations to save the dropped files\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      console.log('Dropped file:', file.name);\r\n      // Here, you can upload the file to a server or process it as needed\r\n    }\r\n  }\r\n  onDragStart(event: DragEvent) {\r\n    // Add any necessary data to the drag event\r\n    const target = event.target as HTMLImageElement; // Ensure the target is an <img> element\r\n    const imageUrl = target.src; // Get the source URL of the image\r\n    if (event.dataTransfer && imageUrl) {\r\n      event.dataTransfer.setData('text/uri-list', imageUrl);\r\n    }\r\n  }\r\n\r\n  onDragEnd(event: DragEvent) {\r\n    // Perform any cleanup tasks after dragging ends\r\n  }\r\n\r\n  async uploadFiles(files: FileList) {\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      const filePath = `uploads/${file.name}`;\r\n      const fileRef = this.fireStorage.ref(filePath);\r\n      const task = this.fireStorage.upload(filePath, file);\r\n\r\n      // Wait for the upload task to complete\r\n      await task;\r\n\r\n      console.log('File uploaded successfully:', filePath);\r\n    }\r\n  }\r\n\r\n\r\n\r\n   async onFileChange(event:any){\r\n    const file = event.target.files[0]\r\n    if(file){\r\n      const path = `${file.name}`;\r\n      const uploadTask =await this.fireStorage.upload(path,file);\r\n      const url = await uploadTask.ref.getDownloadURL();\r\n      console.log(url);\r\n    }\r\n  }\r\n\r\n}\r\n","<input type=\"file\" (change)=\"onFileChange($event)\">\r\n<div id=\"drag-container\">\r\n  <div\r\n    class=\"drag-item\"\r\n    draggable=\"true\"\r\n    (dragstart)=\"onDragStart($event)\"\r\n    (dragend)=\"onDragEnd($event)\"\r\n  >\r\n    Drag me!\r\n  </div>\r\n  <div\r\n    class=\"drop-target\"\r\n    (dragover)=\"onDragOver($event)\"\r\n    (dragenter)=\"onDragEnter($event)\"\r\n    (dragleave)=\"onDragLeave($event)\"\r\n    (drop)=\"onDrop($event)\"\r\n  >\r\n    Drop here!\r\n  </div>\r\n</div>\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}